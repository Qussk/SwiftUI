---
title: '[Swift]스토리보드에서 Segue이해하기'
date: 2020-05-08 11:30:08
category: "ios"
tags: 
- Swift
- Segue
- 화면전환
- present
thumbnail: /image/segue-6.png
---


앱개발하다보면 필수적으로 [화면전환]에 대한 문제를 맞딱드리게 된다.. 

그래서 막상 코드로 구현하다 보면.. 

생각보다(?:0) 어렵다... 쉬운듯 어렵고, 심플한듯 복잡한..

사용할 땐 화면에 대한 생각전혀 해보지 못하고 슉슉 넘겨댔는데...  

구현하는 건 왜케 어려워.... 할 수도 있다. ~~실제로 나도 그랬으니까.~~

그리고 그게 풀리지 않을때는 구글링해보다가..  

어라 ? 모야모야 스토리보드에서 쉽게 화면전환 할 수 있잖아~~~?? 라고 생각하고 ~~그게 나와 세그웨이의 첫만남..~~

세그웨이를 ㅍㅍ검색하시는 분들도 있겠지..  ~~나야나~~

~~근데 막상 세그웨이 글 봐도 원하는게 안돼서 그냥 코드로 했었음ㅋㅋ..ㅠㅠ~~


그래서 나와 비슷한 경험을 하시는(?) 분들을 위해 세그웨이에 대한 정보를 정말 간단하게 정리해보았다. 



## 세그웨이 이해

한쪽 방향으로만 흐르는 [화면전환]으로, 출발지와 목적지의 특성을 갖는다.

대충 이렇게 생각하면 쉬울 것 같다. (이게 다니까..)


## 세그웨이의 특징 

- 스토리 보드로 쉽게 구현이 가능하다. 

- 소스코드를 이용해서 화면 전환을 처리를 하려면 대상이 되는 뷰 컨트롤러의 정보를 읽어와 직접 인스턴스화 한 후에 화면을 전환해야 하지만, 세그웨이를 이용하면 뷰 컨트롤러에 대한 정보가 없어도 된다. (세그웨이가 스토리보드상의 연결 정보를 이용하여 대상 뷰 컨트롤러의 인스턴스를 자동으로 만들어 주기 때문)


## 세그웨이의 장단점

**장점**
- 구현이 쉽다. 
- 화면과 화면을 연결하기 위해 아무런 소스 코드도 필요로 하지 않는다

**단점**
- 일괄적으로 적용되는 것이라 특정 상황에 대응하기 어렵다. 


알다시피, 모든 개념에는 좋고 안좋고 보다, 각자의 상황에 알맞게 사용하는 게 중요하다는 점을 꼭 기억하자 !


## 세그웨이 종류


세그웨이의 종류는 2가지가 있다. "액션 세그웨이(Action Segue == Trigger Segue)"와 "메뉴얼 세그웨이(Manual Segue)"가 있는데, 쉽게 구분하자면 아래를 보자. 

- 액션 세그웨이(Action Segue  :  버튼(출발지) - 뷰컨트롤러(목적지)
- 메뉴얼 세그웨이(Manual Segue)  :  뷰컨트롤러(출발지)  ~ 

액션 세그웨이는 버튼의 터치 이벤트가 세그웨이로 실행으로 바로 연결되므로, 소스 코드를 추가하지 않아도 화면 전환 기능을 구현하지만,

매뉴얼 세그웨이는 UIKit 프레임워크에 정의된 performSegue(withIdentifier : sender) 메소드를 사용하기 때문에 원활한 사용을 위해 별도의 Identifier를 지정해줘야한다. ( 이것에 대한 내용은 이후 구현 포스팅에서 참고하자)


## 1. 세그웨이 활용 

일단 글만보면 이해가 안되므로 아래 이미지를 보자. 

(예시는 액션세그웨이로 진행하였다.)


![이미지](/image/segue-1.png)


1-1. 이미지와 같이 뷰컨트롤러를 2개 만들고 A ViewController에 Button을 하나 추가한다. 
1-2. 스토리보드상의 Button을 control을 누른 채 다음으로 보여줄 화면(목적지화면)으로 드래그 하여 커서를 놓는다. 
1-3. 그럼 검정색 작은 메뉴얼이 뜨는데 여기서 show로 해줄지, PresentModally로 해줄지 선택한다. 
(show는 단순화면 전환시, PresentModally 화면전환시 부가 기능 추가)
1-4. 생성된 sege줄을 클릭하면 (위 이미지)1-3에 대한 변경이 가능하니 참고하자. 


![이미지](/image/segue-2.png)

1-5. PresentModally로 선택시 present Stly 변경이 가능하다. 
(Automatic은 일반 present 스타일로 위에서 아래로 나오는 카드형. FullScreen은 풀화면형.)


위를 적용시 빌드를 하면, 버튼을 누를 때 목적지화면으로 전환되는 모습을 볼 수 있다. 


다만, 그 화면에서는 이제 아무것도 할 수가 없다.

왜냐하면 정말 뷰만 이어 놓았기 때문에.. 

(뒤로갈 수 있는 버튼도 없고, 네비게이션 바가 있는 것도 아니고...)



## 2. Exit


그래서 당황한 나머지? 이런 실수를 할 수 있다. 

"1.에서 한 방법처럼 또 show!로 세그웨이 연결해주면 되지 !!!! "

하고 아래의 이미지와 같이 행동했다면...  

![이미지](/image/segue-4.png)


아주 이상한 경험을 할 수 있다. 

그러니까, 

```
A -> B 
B <- A 
```
의 형태로 화면전환이 되는 것이 아니라,

```
A -> B -> A -> B -> A -> B -> A -> B -> A -> B ...(무한)
```
이런 형태로 화면이 계속 생성되서.. 

![이미지](/image/segue-5.png)


이런 몹쓸 형태의 구조가 된다. 

세그웨이는 목적지가 되는 뷰 컨트롤러의 인스턴스를 자동으로 생성하기때문에, 
역방향의 세그웨이를 다시 생성한다는 것은 이미 존재하는 뷰 컨트롤러의 인스턴스를 또 다시 만들어 낸다는 의미이다. 그러면 동일한 뷰 컨트롤러가 중복되는 것. 

이러면 앱을 사용할 수 없다. (오류가 날 수 있음)

그래서 우리는 [화면복귀]라는 개념을 알아야한다. 

화면 복귀하는 법은 아주 간단하다. unwindow개념을 사용하면 된다. 

새로운 화면으로 전환하는 것을 Wind 라고 한다면 Unwind는 Wind 작업을 해제한다는 의미라고 볼 수 있다. 


2-1. unwind 코드 불러오기.  

![이미지](/image/unwind.png)


2-2. unwind에 복귀할 화면(ViewController)으로 고쳐쓰기. 

```
@IBAction func unwindToAViewController(_ unwindSegue: UIStoryboardSegue) {
   let sourceViewController = unwindSegue.source
   
 }
```
A -> B 

AViewController에서 BViewController로 이동하는 화면이었다면, B에서 다시 A로 복귀해야하므로, AViewController에 해당 코드를 입력함. 


2-3. Exit 달기. 



![이미지](/image/segue-6.png)

BViewController에서 버튼을 드래그 하고 "도크(노란색)"버튼 에서 맨뒤에 있는 Exit단추에 놓아주면
2-2에서 만들었던 목록이 아래에 뜨고 돌아갈 화면의 ViewController이름을 선택하면 된다. 


해당화면(BViewController)에서 버튼을 누르면 다시 이전화면(AViewController)으로 복귀할 수 있도록 .. 


그럼 ? present가 계속 생성되는 것이 아닌, 이전화면으로 깔끔하게 돌아가는 모습을 볼 수 있다. 



👏🏻👏🏻👏🏻 🤠


세그웨이에 대한 자세한 활용은 다음 포스트에 남길 계획이다. 

















